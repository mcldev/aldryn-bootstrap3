{% load cms_tags sekizai_tags %}

{% addtoblock "js" %}
    <script>
        // http://stackoverflow.com/a/28593776
        $(function () {
            $('#{{ accordion_id }}').on('shown.bs.collapse', function (e) {
                var toolbar_offset = {% if request.toolbar and request.toolbar.show_toolbar %} 45; {% else %} 0; {% endif %}
                var offset = $('.panel > .panel-collapse.in').offset();
                if(offset) {
                    $('html,body').animate({
                        scrollTop: $('.panel-collapse.in').siblings('.panel-heading').offset().top - toolbar_offset
                    }, 500);
                }
            });
        });

    </script>
{% endaddtoblock %}

<div class="accordion panel-group
    {% if instance.context %} panel-{{ instance.context }}{% endif %}
    {% if instance.classes %} {{ instance.classes }}{% endif %}"
    id="{{ accordion_id }}"
    role="tablist"
    aria-multiselectable="true"
    {{Â instance.attributes_str }}>

    {% for plugin in instance.child_plugin_instances %}
        {% with parentloop=forloop index=instance.index %}
            {% render_plugin plugin %}
        {% endwith %}
    {% endfor %}
</div>
